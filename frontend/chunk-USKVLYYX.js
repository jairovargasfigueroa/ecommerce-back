import{a as Dt}from"./chunk-H75MTFYF.js";import{$a as U,Ab as mt,Bb as lt,Cb as ct,Db as R,Ea as O,Eb as dt,Fb as st,Ga as H,Gb as pt,Hb as ut,Ib as ft,Ja as $,Jb as gt,Ka as q,Kb as Ct,Lb as ht,Mb as Mt,Nb as _t,Oa as L,Ob as bt,Pb as St,Ra as W,Sa as z,Ta as J,Va as K,Wa as P,_a as Q,ab as g,cb as X,db as C,eb as Y,fb as Z,gb as tt,hb as et,ib as it,jb as at,kb as D,lb as v,mb as x,pb as E,rb as w,sb as ot,tb as rt,xb as T,yb as I,zb as nt}from"./chunk-CC66Z2HJ.js";import{Fb as p,Pb as i,Qb as r,Rb as f,Sb as b,Tb as S,Vb as B,Yb as d,_b as y,dd as G,fb as l,gb as c,jc as V,kc as n,lc as M,mc as A,oa as F,pa as k,sb as u,yb as h}from"./chunk-ZV4WQW5U.js";import{a as _}from"./chunk-GAL4ENT6.js";var N=(()=>{class t{constructor(e,o,a){this.fb=e,this.dialogRef=o,this.data=a,this.modo="crear"}ngOnInit(){this.modo=this.data?"editar":"crear",this.categoriaForm=this.fb.group({nombre:[this.data?.nombre||"",H.required],descripcion:[this.data?.descripcion||"",H.required]})}guardar(){if(this.categoriaForm.valid){let e=_({id:this.data?.id??void 0},this.categoriaForm.value);this.dialogRef.close(e)}}cancelar(){this.dialogRef.close()}static{this.\u0275fac=function(o){return new(o||t)(c(J),c(T),c(I))}}static{this.\u0275cmp=u({type:t,selectors:[["app-dialogo-crear-editar"]],decls:22,vars:4,consts:[[1,"cardWithShadow","theme-card"],[1,"m-b-0"],[1,"b-t-1"],[3,"ngSubmit","formGroup"],[1,"row"],[1,"col-lg-6"],[1,"f-w-600","m-b-8","d-block"],["appearance","outline",1,"w-100"],["matInput","","placeholder","Nombre","formControlName","nombre"],["matInput","","placeholder","Descripci\xF3n","formControlName","descripcion"],[1,"m-t-12"],["mat-flat-button","","color","primary","type","submit",3,"disabled"],["mat-stroked-button","","color","warn","type","button",3,"click"]],template:function(o,a){o&1&&(i(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title",1),n(3),r()(),i(4,"mat-card-content",2)(5,"form",3),d("ngSubmit",function(){return a.guardar()}),i(6,"div",4)(7,"div",5)(8,"mat-label",6),n(9,"Nombre"),r(),i(10,"mat-form-field",7),f(11,"input",8),r()(),i(12,"div",5)(13,"mat-label",6),n(14,"Descripci\xF3n"),r(),i(15,"mat-form-field",7),f(16,"input",9),r()()(),i(17,"div",10)(18,"button",11),n(19),r(),i(20,"button",12),d("click",function(){return a.cancelar()}),n(21,"Cancelar"),r()()()()()),o&2&&(l(3),A(" ",a.modo==="crear"?"Crear Categor\xEDa":"Editar Categor\xEDa"," "),l(2),p("formGroup",a.categoriaForm),l(13),p("disabled",a.categoriaForm.invalid),l(),A(" ",a.modo==="crear"?"Crear":"Guardar"," "))},dependencies:[K,L,O,$,q,W,z,w,D,x,E,v,U,Q,P,Z,Y,C,g],encapsulation:2})}}return t})();var wt=(()=>{class t{constructor(e,o){this.dialogRef=e,this.data=o}confirmar(){this.dialogRef.close(!0)}cancelar(){this.dialogRef.close(!1)}static{this.\u0275fac=function(o){return new(o||t)(c(T),c(I))}}static{this.\u0275cmp=u({type:t,selectors:[["app-dialogo-eliminar"]],decls:13,vars:1,consts:[["mat-dialog-title",""],["mat-flat-button","","color","primary",2,"border-radius","24px","padding","6px 24px",3,"click"],["mat-stroked-button","",1,"bg-error","text-white",2,"border-radius","24px","padding","6px 24px",3,"click"]],template:function(o,a){o&1&&(i(0,"h4",0),n(1,"Confirmaci\xF3n"),r(),i(2,"mat-dialog-content")(3,"p"),n(4,"\xBFEst\xE1s seguro de que seas eliminar la categor\xEDa "),i(5,"strong"),n(6),r(),n(7,"?"),r()(),i(8,"mat-dialog-actions")(9,"button",1),d("click",function(){return a.confirmar()}),n(10," Si "),r(),i(11,"button",2),d("click",function(){return a.cancelar()}),n(12," Cancelar "),r()()),o&2&&(l(6),M(a.data.nombre))},dependencies:[G,R,mt,ct,lt,C,g],encapsulation:2})}}return t})();function Rt(t,s){t&1&&(i(0,"th",13),n(1,"Nombre"),r())}function Ft(t,s){if(t&1&&(i(0,"td",14),n(1),r()),t&2){let e=s.$implicit;l(),M(e.nombre)}}function kt(t,s){t&1&&(i(0,"th",13),n(1,"Descripci\xF3n"),r())}function yt(t,s){if(t&1&&(i(0,"td",14),n(1),r()),t&2){let e=s.$implicit;l(),M(e.descripcion)}}function At(t,s){t&1&&(i(0,"th",15),n(1,"Acciones"),r())}function Ht(t,s){if(t&1){let e=B();i(0,"td",14)(1,"button",16)(2,"mat-icon"),n(3,"more_vert"),r()(),i(4,"mat-menu",null,0)(6,"button",17),d("click",function(){let a=F(e).$implicit,m=y();return k(m.editar(a))}),i(7,"mat-icon"),n(8,"edit"),r(),i(9,"span"),n(10,"Editar"),r()(),i(11,"button",17),d("click",function(){let a=F(e).$implicit,m=y();return k(m.eliminar(a))}),i(12,"mat-icon"),n(13,"delete"),r(),i(14,"span"),n(15,"Eliminar"),r()()()()}if(t&2){let e=V(5);l(),p("matMenuTriggerFor",e)}}function Nt(t,s){t&1&&f(0,"tr",18)}function jt(t,s){t&1&&f(0,"tr",19)}var de=(()=>{class t{constructor(e,o){this.apiService=e,this.dialog=o,this.dataSource1=new St([]),this.columnas=["nombre","descripcion","acciones"]}ngOnInit(){this.cargarDatos()}cargarDatos(){this.apiService.get("categorias").subscribe({next:e=>{this.dataSource1.data=e},error:e=>{console.error("Error al cargar categor\xEDas:",e)}})}guardar(){this.dialog.open(N,{width:"500px",data:null}).afterClosed().subscribe(o=>{console.log("Resultado del di\xE1logo:",o),o&&this.apiService.post("categorias/",o).subscribe({next:a=>{this.dataSource1.data=[...this.dataSource1.data,a]}})})}editar(e){this.dialog.open(N,{width:"500px",data:_({},e)}).afterClosed().subscribe(a=>{a&&this.apiService.put("categorias",a.id,a).subscribe({next:m=>{let j=this.dataSource1.data.findIndex(Tt=>Tt.id===m.id);j!==-1&&(this.dataSource1.data[j]=m,this.dataSource1.data=[...this.dataSource1.data])}})})}eliminar(e){this.dialog.open(wt,{width:"350px",maxHeight:"90vh",data:{nombre:e.nombre}}).afterClosed().subscribe(a=>{a&&this.apiService.delete("categorias",e.id).subscribe({next:()=>{this.dataSource1.data=this.dataSource1.data.filter(m=>m.id!=e.id)},error:m=>{console.log("Error eliminando categor\xEDa: ",m)}})})}static{this.\u0275fac=function(o){return new(o||t)(c(Dt),c(nt))}}static{this.\u0275cmp=u({type:t,selectors:[["app-categorias"]],decls:20,vars:3,consts:[["menu","matMenu"],[1,"cardWithShadow"],[1,"table-responsive"],["mat-flat-button","","color","primary",3,"click"],["mat-table","",1,"w-100",3,"dataSource"],["matColumnDef","nombre"],["mat-header-cell","","class","f-w-600 f-s-14",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","acciones"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",1,"f-w-600","f-s-14"],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","aria-label","Acciones",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,a){o&1&&(i(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),n(3,"Categor\xEDas"),r()(),i(4,"mat-card-content")(5,"div",2)(6,"button",3),d("click",function(){return a.guardar()}),n(7,"+ Nueva Categor\xEDa"),r(),i(8,"table",4),b(9,5),h(10,Rt,2,0,"th",6)(11,Ft,2,1,"td",7),S(),b(12,8),h(13,kt,2,0,"th",6)(14,yt,2,1,"td",7),S(),b(15,9),h(16,At,2,0,"th",10)(17,Ht,16,1,"td",7),S(),h(18,Nt,1,0,"tr",11)(19,jt,1,0,"tr",12),r()()()()),o&2&&(l(8),p("dataSource",a.dataSource1),l(10),p("matHeaderRowDef",a.columnas),l(),p("matRowDefColumns",a.columnas))},dependencies:[bt,dt,pt,Ct,ut,st,ht,ft,gt,Mt,_t,rt,ot,at,et,tt,it,C,g,X,w,D,x,E,v,R],encapsulation:2})}}return t})();export{de as CategoriasComponent};
