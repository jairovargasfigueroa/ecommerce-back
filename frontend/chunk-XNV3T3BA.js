import{a as $}from"./chunk-H75MTFYF.js";import{N as S,P as g,Q as T,R as V}from"./chunk-PQ7QENVN.js";import{Eb as I,Fb as H,Gb as F,Hb as Q,Ib as z,Jb as A,Kb as B,Lb as k,Mb as L,Nb as O,Pb as P,Wa as E,_a as R,ab as U,eb as x}from"./chunk-CC66Z2HJ.js";import{Fb as u,Pb as a,Qb as o,Rb as d,Sb as c,Tb as f,Yb as b,dc as C,dd as D,ec as _,fb as l,fc as v,gb as M,kc as n,mc as h,sb as w,tc as y,yb as p}from"./chunk-ZV4WQW5U.js";import"./chunk-GAL4ENT6.js";var j=()=>[5,10,20];function N(e,r){e&1&&(a(0,"th",16),n(1," Nombre "),o())}function G(e,r){if(e&1&&(a(0,"td",17),n(1),o()),e&2){let i=r.$implicit;l(),h(" ",i.username," ")}}function J(e,r){e&1&&(a(0,"th",16),n(1," Email "),o())}function K(e,r){if(e&1&&(a(0,"td",17),n(1),o()),e&2){let i=r.$implicit;l(),h(" ",i.email," ")}}function W(e,r){e&1&&(a(0,"th",16),n(1," Rol "),o())}function X(e,r){if(e&1&&(a(0,"td",17),n(1),o()),e&2){let i=r.$implicit;l(),h(" ",i.rol," ")}}function Y(e,r){e&1&&d(0,"tr",18)}function Z(e,r){e&1&&d(0,"tr",19)}var ce=(()=>{class e{constructor(i){this.apiService=i,this.totalRegistros=0,this.paginaActual=1,this.columnas=["username","email","rol"],this.dataSource=new P}ngOnInit(){this.obtenerUsuarios()}obtenerUsuarios(){let i=this.paginator?.pageIndex??0;this.apiService.get("usuarios/",{page:i+1}).subscribe({next:t=>{console.log("usuarios obtenidos:",t),this.dataSource.data=t.results,this.totalRegistros=t.count,this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},error:t=>console.log("Error al obtener usuarios",t)})}ngAfterViewInit(){this.paginator.page.subscribe(()=>this.obtenerUsuarios())}applyFilter(i){let t=i.target.value;this.dataSource.filter=t.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}static{this.\u0275fac=function(t){return new(t||e)(M($))}}static{this.\u0275cmp=w({type:e,selectors:[["app-usuario"]],viewQuery:function(t,m){if(t&1&&(C(S,5),C(g,5)),t&2){let s;_(s=v())&&(m.paginator=s.first),_(s=v())&&(m.sort=s.first)}},decls:24,vars:7,consts:[[1,"table-wrapper"],[1,"table-header"],["appearance","outline"],["matInput","","placeholder","Buscar usuarios",3,"keyup"],["mat-raised-button","","color","primary"],[1,"table-container"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","username"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["matColumnDef","rol"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"table-footer"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,m){t&1&&(a(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-label"),n(4,"Buscar"),o(),a(5,"input",3),b("keyup",function(q){return m.applyFilter(q)}),o()(),a(6,"div")(7,"button",4),n(8,"Agregar usuario"),o()()(),a(9,"div",5)(10,"table",6),c(11,7),p(12,N,2,0,"th",8)(13,G,2,1,"td",9),f(),c(14,10),p(15,J,2,0,"th",8)(16,K,2,1,"td",9),f(),c(17,11),p(18,W,2,0,"th",8)(19,X,2,1,"td",9),f(),p(20,Y,1,0,"tr",12)(21,Z,1,0,"tr",13),o()(),a(22,"div",14),d(23,"mat-paginator",15),o()()),t&2&&(l(10),u("dataSource",m.dataSource),l(10),u("matHeaderRowDef",m.columnas),l(),u("matRowDefColumns",m.columnas),l(2),u("length",m.totalRegistros)("pageSize",5)("pageSizeOptions",y(6,j)))},dependencies:[D,V,R,E,x,U,S,g,T,I,F,B,Q,H,k,z,A,L,O],encapsulation:2})}}return e})();export{ce as UsuarioComponent};
