import{a as V}from"./chunk-5EGGF7IW.js";import{d as v,e as S,i as h}from"./chunk-XRFPBX2B.js";import{a as D}from"./chunk-H75MTFYF.js";import{R as G,a as j}from"./chunk-PQ7QENVN.js";import{Ea as b,Ga as c,Ja as w,Ka as x,La as C,Na as d,Oa as y,Ra as F,Sa as k,Ua as I,Va as M,Wa as E,_a as L,ab as _,eb as N,kb as R,mb as A}from"./chunk-CC66Z2HJ.js";import{Fb as l,Pb as e,Qb as t,Rb as a,Yb as f,fb as m,gb as p,kc as o,sb as g,tc as u}from"./chunk-ZV4WQW5U.js";import"./chunk-GAL4ENT6.js";var Q=()=>["/dashboard"],X=()=>["/"],Y=()=>["/authentication/register"],q=(()=>{class s{constructor(r,i){this.router=r,this.apiService=i,this.form=new C({username:new d("",[c.required]),password:new d("",[c.required])})}login(){if(this.form.invalid)return;let r=this.form.value;console.log(r),this.apiService.post("usuarios/login/",r).subscribe({next:i=>{console.log("UsuarioLogueado",i),localStorage.setItem("token",i.access),localStorage.setItem("refresh",i.refresh),localStorage.setItem("username",i.username),localStorage.setItem("user_id",i.user_id.toString()),localStorage.setItem("rol",i.rol);let n=localStorage.getItem("redireccionPendiente");n?this.router.navigate([n]):this.router.navigate(["/dashboard"])},error:i=>{console.log(i,"Error credenciale incorrectas"),alert("Credenciales incorrectas")}}),console.log("se llamo al api correctamente")}logout(){localStorage.removeItem("token"),localStorage.removeItem("refresh"),localStorage.removeItem("rol"),localStorage.removeItem("username"),localStorage.removeItem("redireccionPendiente"),localStorage.removeItem("carrito"),this.router.navigate(["/catalogo"])}static{this.\u0275fac=function(i){return new(i||s)(p(v),p(D))}}static{this.\u0275cmp=g({type:s,selectors:[["app-side-login"]],decls:28,vars:8,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","./assets/images/logos/logo.svg","alt","logo",1,"align-middle","m-2"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","username"],["matInput","","type","password","formControlName","password"],[1,"d-flex","align-items-center","m-b-12"],["color","primary"],[1,"text-primary","f-w-600","text-decoration-none","m-l-auto","f-s-14",3,"routerLink"],["mat-flat-button","","color","primary","type","submit",1,"w-100",3,"disabled"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"]],template:function(i,n){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),a(7,"img",7),t()(),e(8,"form",8),f("ngSubmit",function(){return n.login()}),e(9,"mat-label",9),o(10,"Usuario"),t(),e(11,"mat-form-field",10),a(12,"input",11),t(),e(13,"mat-label",9),o(14,"Contrase\xF1a"),t(),e(15,"mat-form-field",10),a(16,"input",12),t(),e(17,"div",13)(18,"mat-checkbox",14),o(19,"Remember this Device"),t(),e(20,"a",15),o(21,"Forgot Password ?"),t()(),e(22,"button",16),o(23," Inciar secion "),t()(),e(24,"span",17),o(25,"Eres nuevo en Ecommerce? "),e(26,"a",18),o(27," Registrarme"),t()()()()()()()),i&2&&(m(6),l("routerLink",u(5,Q)),m(2),l("formGroup",n.form),m(12),l("routerLink",u(6,X)),m(2),l("disabled",n.form.invalid),m(4),l("routerLink",u(7,Y)))},dependencies:[h,S,G,j,L,E,N,R,A,_,I,y,b,w,x,M,F,k],encapsulation:2})}}return s})();var Z=()=>["/dashboard"],$=()=>["/authentication/login"],P=(()=>{class s{constructor(r,i,n){this.settings=r,this.router=i,this.apiService=n,this.options=this.settings.getOptions(),this.form=new C({username:new d("",[c.required,c.minLength(6)]),password:new d("",[c.required]),email:new d("",[c.required]),rol:new d("cliente")})}get f(){return this.form.controls}submit(){this.form.invalid||(console.log("DatosForm",this.form.value),this.apiService.post("usuarios/",this.form.value).subscribe({next:()=>{localStorage.getItem("redireccionPendiente")?this.router.navigate(["/authentication/login"]):this.router.navigate(["/dashboard"])},error:r=>{console.error("Error al registar usuario",r)}}))}static{this.\u0275fac=function(i){return new(i||s)(p(V),p(v),p(D))}}static{this.\u0275cmp=g({type:s,selectors:[["app-side-register"]],decls:42,vars:5,consts:[[1,"blank-layout-container","justify-content-center","align-items-center","bg-light"],[1,"position-relative","row","w-100","h-100","bg-gredient","justify-content-center"],[1,"col-lg-4","d-flex","align-items-center"],[1,"cardWithShadow","boxed-auth"],[1,"p-32"],[1,"text-center"],[3,"routerLink"],["src","./assets/images/logos/logo.svg","alt","logo",1,"align-middle","m-2"],[1,"row","m-t-24","custom-row"],[1,"col-6"],["mat-stroked-button","",1,"w-100"],[1,"d-flex","align-items-center"],["src","/assets/images/svgs/google-icon.svg","alt","google","width","16",1,"m-r-8"],[1,"d-none","d-lg-block"],["mat-stroked-button","",1,"w-100","d-flex","align-items-center"],["src","/assets/images/svgs/facebook-icon.svg","alt","facebook","width","40",1,"m-r-4"],[1,"or-border","m-t-30"],[1,"m-t-30",3,"ngSubmit","formGroup"],[1,"mat-subtitle-2","f-s-14","f-w-600","m-b-12","d-block"],["appearance","outline","color","primary",1,"w-100"],["matInput","","formControlName","username"],["matInput","","type","email","formControlName","email"],["matInput","","type","password","formControlName","password"],["mat-flat-button","","color","primary","type","submit",1,"w-100"],[1,"d-block","f-w-500","text-center","m-t-24"],[1,"text-decoration-none","text-primary","f-w-500","f-s-14",3,"routerLink"]],template:function(i,n){i&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content",4)(5,"div",5)(6,"a",6),a(7,"img",7),t()(),e(8,"div",8)(9,"div",9)(10,"button",10)(11,"div",11),a(12,"img",12),e(13,"span",13),o(14,"Sign in with Google"),t()()()(),e(15,"div",9)(16,"button",14)(17,"div",11),a(18,"img",15),e(19,"span",13),o(20,"Sign in with FB"),t()()()()(),e(21,"div",16),o(22,"or sign up with"),t(),e(23,"form",17),f("ngSubmit",function(){return n.submit()}),e(24,"mat-label",18),o(25,"Nombre de usuario"),t(),e(26,"mat-form-field",19),a(27,"input",20),t(),e(28,"mat-label",18),o(29,"Correo electr\xF3nico"),t(),e(30,"mat-form-field",19),a(31,"input",21),t(),e(32,"mat-label",18),o(33,"Contrase\xF1a"),t(),e(34,"mat-form-field",19),a(35,"input",22),t(),e(36,"button",23),o(37," Registrarme "),t()(),e(38,"span",24),o(39,"Already have an Account? "),e(40,"a",25),o(41," Sign In"),t()()()()()()()),i&2&&(m(6),l("routerLink",u(3,Z)),m(17),l("formGroup",n.form),m(17),l("routerLink",u(4,$)))},dependencies:[h,S,G,L,E,N,R,A,_,I,y,b,w,x,M,F,k],encapsulation:2})}}return s})();var fe=[{path:"",children:[{path:"login",component:q},{path:"register",component:P}]}];export{fe as AuthenticationRoutes};
