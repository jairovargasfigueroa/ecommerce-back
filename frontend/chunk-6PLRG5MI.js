import{a as Z}from"./chunk-QSMC3UDR.js";import{e as j,i as q}from"./chunk-XRFPBX2B.js";import{a as Y}from"./chunk-H75MTFYF.js";import{N as J,O as K,R as X,f as Q,g as R}from"./chunk-PQ7QENVN.js";import{ab as B,db as L,kb as N,lb as U,mb as W,qb as G,rb as H}from"./chunk-CC66Z2HJ.js";import{Ac as O,Fb as m,Pb as e,Qb as i,Rb as h,Vb as f,Yb as u,Zc as z,_b as g,_c as D,bc as b,bd as F,cb as C,cd as A,dc as y,dd as $,ec as M,fb as r,fc as P,gb as x,jc as E,kc as o,lc as I,mc as p,oa as s,pa as d,sb as w,tc as V,xc as S,yb as v,yc as k,zc as T}from"./chunk-ZV4WQW5U.js";import"./chunk-GAL4ENT6.js";var et=["drawer"],it=()=>[5,10,20];function rt(n,_){if(n&1){let t=f();e(0,"div",14)(1,"mat-card",15),h(2,"img",16),e(3,"mat-card-content")(4,"p"),o(5),i(),e(6,"p"),o(7),S(8,"currency"),i(),e(9,"p"),o(10),i(),e(11,"p"),o(12),i()(),e(13,"button",17),u("click",function(){let a=s(t).$implicit,l=g(2);return d(l.addToCart(a))}),o(14," Agregar producto "),i(),e(15,"button",17),u("click",function(){let a=s(t).$implicit,l=g(2);return d(l.quitarProducto(a))}),o(16," quitar producto "),i()()()}if(n&2){let t=_.$implicit;r(2),m("src",t.imagen,C)("alt",t.nombre),r(3),p("Nombre: ",t.nombre,""),r(2),p("Precio: ",k(8,6,t.precio),""),r(3),p("Cantidad: $",t.stock,""),r(2),p("Descripcion: ",t.descripcion,"")}}function ot(n,_){if(n&1){let t=f();e(0,"div"),v(1,rt,17,8,"div",11),e(2,"div")(3,"button",12),o(4,"Ir al carrito"),i(),e(5,"button",13),u("click",function(){s(t);let a=g();return d(a.vaciarCarrito())}),o(6,"Vaciar carrito"),i()()()}if(n&2){let t=g();r(),m("ngForOf",t.carrito),r(2),m("routerLink","/carrito")}}function nt(n,_){n&1&&(e(0,"p"),o(1,"Tu carrito est\xE1 vac\xEDo."),i())}function at(n,_){if(n&1){let t=f();e(0,"div",18)(1,"mat-card",19)(2,"div",20),h(3,"img",21),e(4,"div",22)(5,"span",23),o(6),S(7,"date"),i()()(),e(8,"mat-card-content",24)(9,"div",25)(10,"span",26),o(11),i()(),e(12,"mat-card-title",27),o(13),i(),e(14,"p",28),o(15),i(),e(16,"h5",29),o(17),i(),e(18,"div",30)(19,"button",17),u("click",function(){let a=s(t).$implicit,l=g();return d(l.addToCart(a))}),o(20," Agregar al carrito "),i()()()()()}if(n&2){let t=_.$implicit;r(3),b("alt",t.nombre),m("src",t.imagen,C),r(3),p(" ",T(7,7,t.fecha_creacion,"shortDate")," "),r(5),p(" Stock: ",t.stock," "),r(2),p(" ",t.nombre," "),r(2),I(t.descripcion),r(2),p("$",t.precio,"")}}var bt=(()=>{class n{constructor(t,c){this.apiService=t,this.carritoService=c,this.panelAbierto=!1,this.carrito=[],this.productos=[],this.pageSize=10,this.paginaActual=0,this.totalProductos=0}ngOnInit(){this.getProducts(),this.carrito=this.carritoService.obtenerCarrito()}getProducts(){this.apiService.get("productos/",{page:this.paginaActual+1}).subscribe({next:t=>{console.log("Productos obtenidos:",t),this.productos=t.results,this.totalProductos=t.count},error:t=>console.error("Error al obtener productos",t)})}onPageChange(t){this.pageSize=t.pageSize,this.paginaActual=t.pageIndex,this.getProducts()}addToCart(t){this.carritoService.agregarProducto(t),this.carrito=this.carritoService.obtenerCarrito(),this.drawer.open(),console.log("Producto agregado al carrito:",t),console.log("Carrito actual:",this.carrito)}quitarProducto(t){this.carritoService.quitarProducto(t),this.carrito=this.carritoService.obtenerCarrito(),console.log("Producto quitado del carrito:",t),console.log("Carrito actualizado:",this.carrito)}vaciarCarrito(){this.carritoService.vaciarCarrito(),this.carrito=this.carritoService.obtenerCarrito(),console.log("Carrito Vacio",this.carrito)}static{this.\u0275fac=function(c){return new(c||n)(x(Y),x(Z))}}static{this.\u0275cmp=w({type:n,selectors:[["app-catalogo"]],viewQuery:function(c,a){if(c&1&&y(et,5),c&2){let l;M(l=P())&&(a.drawer=l.first)}},decls:13,vars:7,consts:[["drawer",""],["carritoVacio",""],["autosize","",1,"w-100","h-100"],["mode","side","position","end","opened","",1,"p-4",2,"width","320px"],[1,"mb-3"],[4,"ngIf","ngIfElse"],["mat-drawer-content","",1,"p-4"],[1,"row","justify-content-center"],["class","col-lg-4",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","mt-4"],["showFirstLastButtons","",3,"page","length","pageSize","pageSizeOptions"],["class","mb-3 border-bottom pb-2",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-raised-button","","color","primary",3,"click"],[1,"mb-3","border-bottom","pb-2"],[1,"cardWithShadow"],["mat-card-image","",3,"src","alt"],["mat-flat-button","","color","primary",3,"click"],[1,"col-lg-4"],[1,"cardWithShadow","position-relative","overflow-hidden"],[1,"position-relative"],["mat-card-image","",1,"w-100",3,"src","alt"],[1,"card-overlay","h-100","d-flex","align-items-end","justify-content-end"],[1,"f-s-12","f-w-600","m-y-16","m-r-16","p-y-4","p-x-8","rounded-pill","bg-white"],[1,"p-y-24"],[1,"user-category"],[1,"f-s-12","m-y-16","f-w-600","p-x-8","p-y-4","bg-light","rounded-pill"],[1,"m-t-20","text-hover-primary","cursor-pointer"],[1,"f-s-14","text-muted"],[1,"f-s-18","text-primary","m-t-8"],[1,"d-flex","align-items-center","justify-content-center","m-t-24"]],template:function(c,a){if(c&1){let l=f();e(0,"mat-drawer-container",2)(1,"mat-drawer",3,0)(3,"h4",4),o(4,"\u{1F6D2} Tu carrito"),i(),v(5,ot,7,2,"div",5)(6,nt,2,0,"ng-template",null,1,O),i(),e(8,"div",6)(9,"div",7),v(10,at,21,10,"div",8),i()(),e(11,"div",9)(12,"mat-paginator",10),u("page",function(tt){return s(l),d(a.onPageChange(tt))}),i()()()}if(c&2){let l=E(7);r(5),m("ngIf",a.carrito.length)("ngIfElse",l),r(5),m("ngForOf",a.productos),r(2),m("length",a.totalProductos)("pageSize",a.pageSize)("pageSizeOptions",V(6,it))}},dependencies:[$,z,D,A,F,X,Q,R,N,W,G,U,B,J,q,j,K,H,L],styles:[".catalogo-container[_ngcontent-%COMP%]{padding:20px}.row[_ngcontent-%COMP%]{gap:20px}.col-lg-4[_ngcontent-%COMP%], .col-md-6[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{margin-bottom:20px}mat-sidenav[_ngcontent-%COMP%]{width:300px;background-color:#f9f9f9;box-shadow:0 2px 4px #0000001a}mat-drawer[_ngcontent-%COMP%]{box-shadow:-2px 0 10px #0000001a}"]})}}return n})();export{bt as CatalogoComponent};
